<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Ospital ng Makati – Antimicrobial Request System (Doctors Module)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- =============================
       OSMak Unified Theme CSS
       ============================= -->
  <link rel="stylesheet" href="css/style.css" />

</head>

<body>

  <!-- =============================
       HEADER
       ============================= -->
  <header>
    <img src="https://maxterrenal-hash.github.io/justculture/osmak-logo.png" alt="OsMak Logo" />
    <div class="title-block">
      <h1>OSPITAL NG MAKATI</h1>
      <span>Antimicrobial Request System – Doctors Module</span>
    </div>
  </header>

  <!-- =============================
       APP WRAPPER
       ============================= -->
  <div class="app">

    <!-- Adult / Pediatric -->
    <div id="modeToggle" class="toggle-row">
      <button class="toggle-btn active" data-mode="adult">Adult</button>
      <button class="toggle-btn" data-mode="pediatric">Pediatric</button>
    </div>

    <!-- PATIENT CARD -->
    <div class="card">
      <h2>Patient Information</h2>

      <div class="field-row">
        <div class="field">
          <label>Patient Name</label>
          <input id="patientName" type="text">
        </div>
      </div>

      <div class="field-row">
        <div class="field">
          <label>Age (years)</label>
          <input id="age" type="number" min="0">
        </div>

        <div class="field">
          <label>Sex</label>
          <select id="sex">
            <option value=""></option>
            <option>male</option>
            <option>female</option>
          </select>
        </div>

        <div class="field">
          <label>Weight (kg)</label>
          <input id="weight" type="number" min="0" step="0.1">
        </div>

        <div id="heightField" class="field" style="display:none;">
          <label>Height (cm)</label>
          <input id="height" type="number" min="0" step="0.1">
        </div>
      </div>

      <div class="field-row">
        <div class="field">
          <label>Hospital Number</label>
          <input id="hospitalNumber" type="text">
        </div>

        <div class="field">
          <label>Ward</label>
          <select id="ward">
            <option value=""></option>
            <option>6th Floor Ward</option>
            <option>ARI 2</option>
            <option>Dengue Ward</option>
            <option>ER Holding</option>
            <option>ER Isolation</option>
            <option>ICU</option>
            <option>Infectious Ward</option>
            <option>Medicine Female</option>
            <option>Medicine Male</option>
            <option>Medicine Isolation Room</option>
            <option>NICU</option>
            <option>Pedia ICU</option>
            <option>Pedia Ward 3</option>
            <option>Pedia Ward 1 Stepdown</option>
            <option>Respiratory ICU</option>
            <option>SARI</option>
            <option>Surgery Female</option>
            <option>Surgery Male</option>
          </select>
        </div>

        <div class="field">
          <label>Diagnosis</label>
          <input id="diagnosis" type="text">
        </div>
      </div>
    </div>

    <!-- GRID LAYOUT -->
    <div class="grid-two">

      <!-- =============================
           LAB DATA
           ============================= -->
      <div class="card lab-card">
        <h2>Laboratory Data</h2>

        <div class="field-row">
          <div class="field">
            <label>Serum Creatinine (µmol/L)</label>
            <input id="scr" type="number" step="0.01">
          </div>

          <div class="field">
            <label>SGPT</label>
            <input id="sgpt" type="number">
          </div>

          <div class="field">
            <label id="egfrLabel">Renal Function (eGFR)</label>
            <div id="egfrBox" class="readonly-box">—</div>
          </div>
        </div>

        <label style="font-size:0.75rem; display:flex; gap:0.4rem;">
          <input type="checkbox" id="scrNotAvailable">
          Creatinine not available yet
        </label>
      </div>

      <!-- =============================
           ANTIMICROBIAL SELECTION
           ============================= -->
      <div class="card antimicrobial-card">
        <h2>Antimicrobial Selection</h2>

        <div class="field-row">
          <div class="field" style="flex:1;">
            <label>Antimicrobial</label>
            <select id="antimicrobialSelect"></select>
          </div>
        </div>

        <div class="field-row">
          <div class="field" style="flex:1;">
            <label>Drug Type</label>
            <input id="drugTypeBox" type="text" readonly>
          </div>
        </div>

        <div id="dosingSection">
          <div class="field-row">
            <div class="field">
              <label>Dose</label>
              <input id="dose" type="text">
            </div>
            <div class="field">
              <label>Frequency</label>
              <input id="frequency" type="text">
            </div>
            <div class="field">
              <label>Duration (days)</label>
              <input id="duration" type="text">
            </div>
          </div>
        </div>
      </div>

      <!-- =============================
           INDICATION
           ============================= -->
      <div class="card indication-card">
        <h2>Indication</h2>
        <div class="chips-row" id="indicationRow">
          <button class="chip" data-ind="Empiric">Empiric</button>
          <button class="chip" data-ind="Prophylactic">Prophylactic</button>
          <button class="chip" data-ind="Therapeutic">Therapeutic</button>
        </div>

        <div class="field-row" style="margin-top:0.75rem;">
          <div class="field" style="flex:1;">
            <label>Basis for Indication</label>
            <textarea id="basisIndication"></textarea>
          </div>
        </div>
      </div>

      <!-- =============================
           RESIDENT INFO
           ============================= -->
      <div class="card resident-card">
        <h2>Requesting Resident</h2>
        <div class="field-row">
          <div class="field">
            <label>Resident Name</label>
            <input id="residentName" type="text">
          </div>

          <div class="field">
            <label>Department</label>
            <select id="clinicalDept">
              <option value=""></option>
              <option>Internal Medicine</option>
              <option>Surgery</option>
              <option>Pediatrics</option>
              <option>Emergency</option>
              <option>Anesthesiology</option>
              <option>Obstetrics and Gynecology</option>
            </select>
          </div>

          <div class="field">
            <label>Date</label>
            <input id="reqDate" type="date">
          </div>
        </div>
      </div>

      <!-- =============================
           ID SPECIALIST (RESTRICTED)
           ============================= -->
      <div id="serviceResidentCard" class="card" style="display:none;">
        <h2>Service Resident / IDS</h2>

        <div class="field-row">
          <div class="field">
            <label>Service Resident</label>
            <input id="serviceResidentName" type="text">
          </div>

          <div class="field">
            <label>ID Specialist</label>
            <select id="idsSelect"></select>
          </div>
        </div>
      </div>

      <!-- =============================
           DRUG MONOGRAPH
           ============================= -->
      <div class="card monograph-card">
        <h2>Drug Monograph</h2>
        <div id="monographBox">
          <p>Select an antimicrobial...</p>
        </div>
      </div>

      <!-- =============================
           PREVIOUS ANTIBIOTICS
           ============================= -->
      <div class="card prevabx-card">
        <h2>Previous / Current Antibiotics</h2>
        <div id="prevAbxContainer"></div>
        <button id="addPrevAbxBtn" class="icon-btn">➕ Add</button>
      </div>

      <!-- =============================
           MICROBIOLOGY
           ============================= -->
      <div class="card micro-card">
        <h2>Microbiology Data</h2>

        <div class="field-row">
          <div class="field" style="flex:1;">
            <label>Specimen Type</label>
            <input id="specimen" type="text">
          </div>
        </div>

        <div id="organismContainer"></div>
        <button id="addOrganismBtn" class="icon-btn">➕ Add Organism</button>
      </div>
    </div>

    <!-- =============================
         ACTIONS
         ============================= -->
    <div class="actions">
      <button id="reviewBtn" class="btn primary">Review</button>
      <button id="downloadPdfBtn" class="btn secondary">Download PDF</button>
    </div>
  </div>

  <!-- =============================
       MODAL
       ============================= -->
  <div id="reviewModalBackdrop" class="modal-backdrop">
    <div class="modal">
      <div class="modal-header">
        <h3>Review Antimicrobial Request</h3>
        <button id="closeModal" class="icon-btn">✕</button>
      </div>

      <div class="modal-body">
        <pre id="reviewContent"></pre>
      </div>

      <div class="actions" style="padding-bottom:1rem;">
        <button id="confirmSubmitBtn" class="btn primary">Submit</button>
      </div>
    </div>
  </div>

  <!-- =============================
       MONOGRAPHS
       ============================= -->
  <script src="adult_monographs.js"></script>
  <script src="pediatric_monographs.js"></script>

  <!-- =============================
       MODULAR AMS SYSTEM
       ============================= -->
  <script type="module" src="js/app.js"></script>

</body>
</html>
